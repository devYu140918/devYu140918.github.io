<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  
  <title>Archives: 2019 | 鱼儿游</title>
  
  

  

  <meta name="HandheldFriendly" content="True">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <!-- meta -->
  

  <!-- link -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css">
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-waves@0.7.6/dist/waves.min.css">
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.6.3/css/all.min.css">
  

  

  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-material-x@19.5/css/style.css">
  

  <script>
    function setLoadingBarProgress(num) {
      document.getElementById('loading-bar').style.width=num+"%";
    }
  </script>

  
  
</head>

<body>
  
  
  <div class="cover-wrapper">
    <cover class='cover  half'>
      
        
  <h1 class='title'>YUEX</h1>


  <div class="m_search">
    <form name="searchform" class="form u-search-form">
      <input type="text" class="input u-search-input" placeholder="" />
      <i class="icon fas fa-search fa-fw"></i>
    </form>
  </div>

<div class='menu navgation'>
  <ul class='h-list'>
    
      
        <li>
          <a class="nav home" href="/"
            
            
            id="home">
            <i class='fas fa-rss fa-fw'></i>&nbsp;博文
          </a>
        </li>
      
        <li>
          <a class="nav home" href="/projects/"
            
            
            id="projects">
            <i class='fas fa-code-branch fa-fw'></i>&nbsp;项目
          </a>
        </li>
      
        <li>
          <a class="nav home" href="/friends/"
            
              rel="nofollow"
            
            
            id="friends">
            <i class='fas fa-link fa-fw'></i>&nbsp;友链
          </a>
        </li>
      
        <li>
          <a class="nav home" href="/about/"
            
              rel="nofollow"
            
            
            id="about">
            <i class='fas fa-info-circle fa-fw'></i>&nbsp;关于
          </a>
        </li>
      
    
  </ul>
</div>

      
    </cover>
    <header class="l_header pure">
  <div id="loading-bar-wrapper">
    <div id="loading-bar" class="pure"></div>
  </div>

	<div class='wrapper'>
		<div class="nav-main container container--flex">
      <a class="logo flat-box" href='/' >
        
          鱼儿游
        
      </a>
			<div class='menu navgation'>
				<ul class='h-list'>
          
  					
  						<li>
								<a class="nav flat-box" href="/"
                  
                  
                  id="home">
									<i class='fas fa-grin fa-fw'></i>&nbsp;示例
								</a>
							</li>
      			
  						<li>
								<a class="nav flat-box" href="/blog/categories/"
                  
                    rel="nofollow"
                  
                  
                  id="blogcategories">
									<i class='fas fa-folder-open fa-fw'></i>&nbsp;分类
								</a>
							</li>
      			
  						<li>
								<a class="nav flat-box" href="/blog/tags/"
                  
                    rel="nofollow"
                  
                  
                  id="blogtags">
									<i class='fas fa-hashtag fa-fw'></i>&nbsp;标签
								</a>
							</li>
      			
  						<li>
								<a class="nav flat-box" href="/blog/archives/"
                  
                    rel="nofollow"
                  
                  
                  id="blogarchives">
									<i class='fas fa-archive fa-fw'></i>&nbsp;归档
								</a>
							</li>
      			
      		
				</ul>
			</div>

			
				<div class="m_search">
					<form name="searchform" class="form u-search-form">
						<input type="text" class="input u-search-input" placeholder="搜索" />
						<i class="icon fas fa-search fa-fw"></i>
					</form>
				</div>
			
			<ul class='switcher h-list'>
				
					<li class='s-search'><a class="fas fa-search fa-fw" href='javascript:void(0)'></a></li>
				
				<li class='s-menu'><a class="fas fa-bars fa-fw" href='javascript:void(0)'></a></li>
			</ul>
		</div>

		<div class='nav-sub container container--flex'>
			<a class="logo flat-box"></a>
			<ul class='switcher h-list'>
				<li class='s-comment'><a class="flat-btn fas fa-comments fa-fw" href='javascript:void(0)'></a></li>
        
          <li class='s-toc'><a class="flat-btn fas fa-list fa-fw" href='javascript:void(0)'></a></li>
        
			</ul>
		</div>
	</div>
</header>
	<aside class="menu-phone">
    <header>
		<nav class="menu navgation">
      <ul>
        
          
            <li>
							<a class="nav flat-box" href="/"
                
                
                id="home">
								<i class='fas fa-clock fa-fw'></i>&nbsp;近期文章
							</a>
            </li>
          
            <li>
							<a class="nav flat-box" href="/blog/archives/"
                
                  rel="nofollow"
                
                
                id="blogarchives">
								<i class='fas fa-archive fa-fw'></i>&nbsp;文章归档
							</a>
            </li>
          
            <li>
							<a class="nav flat-box" href="/projects/"
                
                
                id="projects">
								<i class='fas fa-code-branch fa-fw'></i>&nbsp;开源项目
							</a>
            </li>
          
            <li>
							<a class="nav flat-box" href="/friends/"
                
                  rel="nofollow"
                
                
                id="friends">
								<i class='fas fa-link fa-fw'></i>&nbsp;我的友链
							</a>
            </li>
          
            <li>
							<a class="nav flat-box" href="https://xaoxuu.com/wiki/material-x/"
                
                  rel="nofollow"
                
                
                id="https:xaoxuu.comwikimaterial-x">
								<i class='fas fa-book fa-fw'></i>&nbsp;主题文档
							</a>
            </li>
          
            <li>
							<a class="nav flat-box" href="/about/"
                
                  rel="nofollow"
                
                
                id="about">
								<i class='fas fa-info-circle fa-fw'></i>&nbsp;关于小站
							</a>
            </li>
          
       
      </ul>
		</nav>
    </header>
	</aside>
<script>setLoadingBarProgress(40);</script>

  </div>


  <div class="l_body">
    <div class='body-wrapper'>
      <div class='l_main'>
	
		
  <section class="post-list">
    
      
        
          
        
          
        
          
        
      
    
    
      
        
          <div class='post-wrapper'>
            <article class="post reveal ">
  


  <section class='meta'>
    
    
    <div class="meta" id="header-meta">
      
        
  <h2 class="title">
    <a href="/2019/07/答辩述职/">
      答辩述职
    </a>
  </h2>


      
      <div class='new-meta-box'>
        
          
        
          
            
  <div class='new-meta-item author'>
    <a href="/" rel="nofollow">
      
        <i class="fas fa-user" aria-hidden="true"></i>
      
      <p>YUEX</p>
    </a>
  </div>


          
        
          
            <div class="new-meta-item date">
  <a class='notlink'>
    <i class="fas fa-calendar-alt" aria-hidden="true"></i>
    <p>2019-07-04</p>
  </a>
</div>

          
        
          
            

          
        
          
            

          
        
          
            

          
        
      </div>
      
        <hr>
      
    </div>
  </section>


  <section class="article typo">
    <div class="article-entry" itemprop="articleBody">
      <center><font size="5">述职演讲</font></center>
&emsp;&emsp;各位领导大家好，我是***，今年5月5号入职，到现在已经两个月了。非常感谢各位领导能在百忙之中抽出宝贵的时间看我的转正述职报告，也很荣幸能够成为公司的一员。现对试用期工作内容，分以下三个部分做出总结。

<p>&emsp;&emsp;第一部分，试用期工作计划。这一部分是由导师根据具体岗位要求制定，试用期内大体是按照这个计划来执行的。</p>
<p>&emsp;&emsp;第二部分，试用期工作内容。这一部分对试用期的工作内容做一个简单的概括。</p>
<p>&emsp;&emsp;第三部分，试用期工作成果。这一部分对试用期的工作成果进行概括。</p>
<p>&emsp;&emsp;最后对试用期工作心得做一个简单的分享，提出一些项目中存在的问题，并给出个人优化建议。</p>
<p>&emsp;&emsp;试用期工作计划，总共分为八周，前四周以学习密码学，PKI，各种安全算法，掌握各种算法在java中的运用。后四周以学习MAuth产品，理解产品各业务流程，熟悉项目源代码，完成导师安排的开发任务为主。</p>
<p>&emsp;&emsp;我试用期工作内容总结为以下几点点：</p>
<p>&emsp;&emsp;1、学习Java安全机制，Java加密体系和java加密扩展。</p>
<p>&emsp;&emsp;2、学习安全算法，主要分为 编码算法（BASE64,URLEncode），摘要算法(MD，SHA，mac)，对称/非对称密码算法（des，aes，idea，blowfish，rc2,rc4/rsa,ecdh,ecc），数字签名算法（RSA,DSA,ECDSA）</p>
<p>&emsp;&emsp;3、学习数字证书的管理和SSL安全协议。</p>
<p>&emsp;&emsp;4、MAuth产品的学习，从项目文档入手，搭建开发环境，从接口到代码捋清业务流程。</p>
<p>&emsp;&emsp;5、熟悉一期项目需求和代码，梳理一期项目接口，编写接口文档。熟悉二期需求，做项目准备工作。</p>
<p>&emsp;&emsp;工作成果分为三部分，</p>
<p>&emsp;&emsp;第一部分、编码实践，使用各安全算法，对数据进行加密与解密，摘要计算，数字签名和签名验证。学习了SSL安全协议，利用证书搭建Https单向认证和双向认证服务。</p>
<p>&emsp;&emsp;第二部分、搭建了MAuth开发环境，熟悉了证书和令牌的相关业务操作流程，利用移动令牌和移动证书app进行了实践操作。熟悉了二维码扫码登录流程。熟悉了PDF签章业务流程。利用VISO绘制了产品各业务流程的流程图。</p>
<p>&emsp;&emsp;第三部分、农信二期项目准备，阅读了项目一期的工程源码，结合一期的文档熟悉具体业务。梳理了一期项目对外提供的接口，调用的内部NetPass接口以及调用外部接口，形成接口文档。结合二期需求，确定二期项目改造内容，对比现有的几个项目，选择以OCMS项目为基础，将其转换为maven工程，作为后端管理平台的模板。</p>
<p>&emsp;&emsp;试用期工作心得和建议，在前四周学习密码学，算法使用等还比较顺利，在熟悉产品的过程中，遇到了一些问题，导师长时间在外出差，我开始一个人慢慢摸索，尝试代码注释，配置文件和产品说明文档，产品需求文档，一步步寻找答案。一些理解不确定的，不知道地方，利用中午吃饭时间向同事请教。在这个过程中不断加深对产品的理解。</p>
<p>&emsp;&emsp;在阅读源代码的过程中也发现了一些问题:</p>
<p>&emsp;&emsp;1、存在大量相同或者类似的代码逻辑，甚至有一些是重复的，大多数是参数校验逻辑（建议封装一个通用模块，针对参数校验，通用化。加入统一异常处理。这样可以减少大量重复参数校验逻辑和异常处理逻辑）</p>
<p>&emsp;&emsp;2、有些复杂的逻辑缺乏注释（PDF签章流程，由几个接口协同处理，PDF上传之后，仅仅只是保存到服务器上，然后返回了一个包含uuid的二维码，在获取getPdfUrl、getPdfData、getPdfDataCooper的时候，才会对pdf进行摘要处理，这中间过程的数据都是保存在内存里面的【pdf上传记录，如果中间过程出现异常，需要重新上传(不合理)】）摘要计算的时候比较隐蔽，且与上传接口存在关联，需要做一下说明，帮助理解。</p>
<p>&emsp;&emsp;3、关于代码规范的一点建议，Alibaba发布最新的代码规范，并提供的了eclipse和Interlij idea的插件，可以帮助我们扫描项目代码是否符合规范，并给出修改建议。</p>
<h3 id="问题1：农信项目是干什么的？"><a href="#问题1：农信项目是干什么的？" class="headerlink" title="问题1：农信项目是干什么的？"></a><strong>问题1：农信项目是干什么的？</strong></h3><p>答：农信项目，农信统一硬件认证平台以身份认证和交易安全为核心，通过网银系统对接动态令牌，实现电子支付认证渠道的统一，用户只需要开通动态令牌，同时签约对应渠道，就可以同时在网银和手机银行系统中使用动态令牌，不需要维护多个硬件认证介质。在功能上提供身份认证及令牌管理，统计，查询功能，报表导出。</p>
<h3 id="问题2：SSL安全协议握手流程是什么样子的？"><a href="#问题2：SSL安全协议握手流程是什么样子的？" class="headerlink" title="问题2：SSL安全协议握手流程是什么样子的？"></a><strong>问题2：SSL安全协议握手流程是什么样子的？</strong></h3><p>答：ssl安全协议，分为两层，<br>  记录层协议–记录包含 Connection States，数据分片，记录压缩和解压缩，载荷保护。<br>  握手协议：握手协议包含，密钥交换协议，告警协议，和握手交互协议（Client Hello… ）<br>  第一步由 客户端发起 Client Hello，携带 32位Randon1，支持的协议版，加密套件，sessionid，压缩算法，扩展等。<br>  第二步 服务端响应 Server Hello ，server_version 协议版本，服务端32位随机数Random2，sessionid，加密套件，压缩算法，扩展<br>  第三步 服务端发送 Server Certificate，发送服务端证书或证书链，<br>  第四步 server Key Exchange ，密钥算法参数，签名参数，<br>  第五步 可选，服务端请求客户端发送客户端证书（证书链）<br>  第六步， 事件消息 Server hello done，通知客户端服务端密钥交换完成，收到这个消息之后，客户端需要验证服务端证书，在必要情况下验证密钥交换参数。<br>  第七步 Client Certificate 客户端响应服务端要求，发送客户端证书或证书链<br>  第八步 Client Key Exchange 密钥算法参数， Encryption PreMaster Secret 构建预主密钥，使用服务端公钥加密</p>
<pre><code>使用 RSA算法构建时，客户端随机数Random3，TLS1.2 是48位随机数
使用 DH算法构建时，椭圆曲线参数 dh_yc，Random3，65位长度的公钥参数</code></pre><p>密钥到这里就协商好了，客户端和服务端都有了这三个参数<br>  第九步 Certificate Verify 客户端对 从握手开始到当前消息之前的所有数据<br>  客户端使用客户端私钥对前面所有的握手消息做签名hash，然后将原文和数据发送给服务端，服务端验证签名，确认客户端身份</p>
<p>  第十步 Finished<br>  客户端将前面的握手消息生成摘要，再用协商好的密钥加密，这就是客户端发送的第一条加密消息，服务端接收后会用密钥解密，能解密出来说明前面协商的出来的密钥是一致</p>
<h3 id="问题3：证书的申请下载流程讲一下"><a href="#问题3：证书的申请下载流程讲一下" class="headerlink" title="问题3：证书的申请下载流程讲一下"></a><strong>问题3：证书的申请下载流程讲一下</strong></h3><p>证书申请分为三个步骤，第一步、获取uuid，第二步、获取两码，参考号，授权码，第三步是下载。与CA交互三次。之所以有这么多步是当时的业务场景决定的，用户去银行办理ukey，银行会给客户参考码和授权码，用户拿着这两个码，用自己的电脑回去下载，这里可以避嫌，如果客户端从银行直接拿到一个带证书密钥的ukey，很难之后有没有被备份。</p>
<h3 id="问题4：证书里面有哪些东西？"><a href="#问题4：证书里面有哪些东西？" class="headerlink" title="问题4：证书里面有哪些东西？"></a><strong>问题4：证书里面有哪些东西？</strong></h3><p>答：证书里面有证书版本，证书签发者信息，证书拥有者信息，证书有效期，证书签名，签名算法，证书序列号，证书公钥，公钥算法，扩展。DN是用户唯一标识，SN证书序列号,证书发生换证时，DN不会变化，而SN是不同的。</p>
<h3 id="问题5：单向认证和双向认证有什么区别？"><a href="#问题5：单向认证和双向认证有什么区别？" class="headerlink" title="问题5：单向认证和双向认证有什么区别？"></a><strong>问题5：单向认证和双向认证有什么区别？</strong></h3><p>答：单项认证，一般是指客户端验证服务端身份，需要服务端提供服务端证书，客户端用CA证书验证服务端证书有效性。<br>双向认证在单向认证的基础上，增加了客户端认证，服务端验证客户端身份，需要客户端提供证书给服务端，有服务端验证客户端身份。</p>
<h3 id="问题6：服务器是如何验证客户端身份的"><a href="#问题6：服务器是如何验证客户端身份的" class="headerlink" title="*问题6：服务器是如何验证客户端身份的 *"></a>*<em>问题6：服务器是如何验证客户端身份的 *</em></h3><p>答：第一步服务器验证客户端证书有效性，（主要验证证书是否过期，验证证书签名，证书是否被吊销），CA使用私钥对客户端证书做了签名。服务器那CA公钥验证签名。CRL证书吊销列表不定期发布，OSP实时同步查询验证接口。签名的作用有两个，一个是防篡改，另一个的验证身份合法性。</p>
<h3 id="问题7：说一下PDF签章？"><a href="#问题7：说一下PDF签章？" class="headerlink" title="问题7：说一下PDF签章？"></a><strong>问题7：说一下PDF签章？</strong></h3><p>答：PDF签章，客户端上传PDF文件，服务端保存文件数据，客户端获取PDF摘要数据，这个摘要有服务端计算返回，客户端对摘要做签名，作为参数请求，签章后的PDF，服务端调用签章接口，合并得到签章好的PDF，客户端下载PDF，签章结束。</p>
<h3 id="问题8：二维码扫码登录流程？"><a href="#问题8：二维码扫码登录流程？" class="headerlink" title="问题8：二维码扫码登录流程？"></a><strong>问题8：二维码扫码登录流程？</strong></h3><p>二维码扫码登录，涉及到三个接口，<br>第一个是获取生成的二维码，MAuth本地生成，参数是业务标识+随机数+时间戳<br>第二个是扫码登录，客户端扫码，确认登录，携带原始二维码数据和签名。服务端验证，更新用户登录状态<br>第三个是登录状态查询，第三个服务器，通过接口轮训，确认客户端登录状态。</p>
<h3 id="问题9：令牌是怎么计算的？"><a href="#问题9：令牌是怎么计算的？" class="headerlink" title="问题9：令牌是怎么计算的？"></a><strong>问题9：令牌是怎么计算的？</strong></h3><p>令牌有计算 有几个因子， 1、事件因子，2、时间因子（客户端时间和服务端时间，有时需要校对一致），3、种子（就是安全随机数），客户端和服务端通过特定的公式，使用上述几个因子，参与运算得出一个值。比较客户端和服务端计算的结果是否相同，来认证用户。</p>
<h3 id="问题10：怎么把eclipse项目转换成maven项目？"><a href="#问题10：怎么把eclipse项目转换成maven项目？" class="headerlink" title="问题10：怎么把eclipse项目转换成maven项目？"></a><strong>问题10：怎么把eclipse项目转换成maven项目？</strong></h3><p>使用java api读取jar文件的Manifest属性，通过BuildName和version，查询maven仓库接口，得到groupid，artifactid，version，生成xml配置。</p>
<h3 id="问题11：这个项目一期做了哪些东西，二期需求增加了哪些内容？"><a href="#问题11：这个项目一期做了哪些东西，二期需求增加了哪些内容？" class="headerlink" title="问题11：这个项目一期做了哪些东西，二期需求增加了哪些内容？"></a><strong>问题11：这个项目一期做了哪些东西，二期需求增加了哪些内容？</strong></h3><p>项目，一期实现了，硬件新增绑定，更换，解绑，令牌同步/解锁，令牌开机重置，手机银行销户，认证硬件查询，收费信息查询，客户端签约详细查询，客户端绑定贴膜卡，客户端认证，认证响应，客户端令牌同步，客户端解绑贴膜卡，电子银行平台，认证硬件状态变更</p>
<p> 新增了，一些报表统计类，令牌发放统计，用户认证硬件绑定关系查询，用户认证硬件使用情况查询，活跃客户信息查询，交易明细查询。定时任务管理，厂商管理，数据同步管理，定时任务定时同步交易流水，同步认证硬件订单流水，同步认证硬件入库，同步认证硬件调拨</p>
<p>总结起来就是统计查询类开发任务，定时任务管理，与定时任务逻辑。厂商信息管理</p>
<h3 id="问题12：你这管理后台模板的确定，你是怎么考虑的？"><a href="#问题12：你这管理后台模板的确定，你是怎么考虑的？" class="headerlink" title="问题12：你这管理后台模板的确定，你是怎么考虑的？"></a><strong>问题12：你这管理后台模板的确定，你是怎么考虑的？</strong></h3><p>答：我对比两套代码，两套代码的结构差不多了，OCMS是以springMVC为基础，分层结构，按照业务逻辑类型分包。是比较典型的javaee项目。MAuth采用的strust2，strust2目前爆出来的漏洞比较多，考虑到安全问题，放弃使用。其他的技术基本都差不多。</p>
<h3 id="问题13：证书类型有哪些？"><a href="#问题13：证书类型有哪些？" class="headerlink" title="问题13：证书类型有哪些？"></a><strong>问题13：证书类型有哪些？</strong></h3><p>答：CSR证书请求，p12,pfx带私钥的证书，cer、der，p7b,p10公钥证书，格式不太一样。<br>自签名双向认证服务，服务端需要配置两个证书，配置服务端证书，证书信任库。客户端需要导入两个证书，客户端证书、CA证书（p12带私钥的证书）。</p>

      
    </div>
    
  </section>
</article>

          </div>
        
      
        
          <div class='post-wrapper'>
            <article class="post reveal ">
  


  <section class='meta'>
    
    
    <div class="meta" id="header-meta">
      
        
  <h2 class="title">
    <a href="/2019/06/DB2安装使用笔记/">
      DB2安装使用笔记
    </a>
  </h2>


      
      <div class='new-meta-box'>
        
          
        
          
            
  <div class='new-meta-item author'>
    <a href="/" rel="nofollow">
      
        <i class="fas fa-user" aria-hidden="true"></i>
      
      <p>YUEX</p>
    </a>
  </div>


          
        
          
            <div class="new-meta-item date">
  <a class='notlink'>
    <i class="fas fa-calendar-alt" aria-hidden="true"></i>
    <p>2019-06-25</p>
  </a>
</div>

          
        
          
            

          
        
          
            

          
        
          
            

          
        
      </div>
      
        <hr>
      
    </div>
  </section>


  <section class="article typo">
    <div class="article-entry" itemprop="articleBody">
      <h2 id="DB2下载安装"><a href="#DB2下载安装" class="headerlink" title="DB2下载安装"></a>DB2下载安装</h2><p>&emsp;&emsp;因为项目需要，开始接触DB2数据库，首先是下载安装db2 express C版。在IBM的官网上找了好长时间，下载还需要注册申请，好麻烦的说。网上也有一些blog给出了一些下载地址，需要注册使用，只有express c是工开发学习免费使用的。目前版本11.1 express c，下载链接链接：<a href="https://pan.baidu.com/s/1V9AbAXx6qBPkF9fiVOFQyQ" target="_blank" rel="noopener">https://pan.baidu.com/s/1V9AbAXx6qBPkF9fiVOFQyQ</a> 提取码：wdqh ，需要的下载从速，若链接失效不能保证及时更新，请谅解。</p>
<p>&emsp;&emsp;安装过程根据引导一步步来就可以了，建议将自己新建文件夹，将安装过程需要配置路径的地方，都配置成自己的新建好的目录。参考：<a href="https://blog.csdn.net/u010289197/article/details/77507871" title="在windown下安装DB2-Express-C" target="_blank" rel="noopener">在windown下安装DB2-Express-C</a> 这里并没有完全按照这篇blog说的来操作，在配置管理服务器用户信息这一步，使用的本地系统账户。</p>
<h2 id="配置连接使用"><a href="#配置连接使用" class="headerlink" title="配置连接使用"></a>配置连接使用</h2><p>&emsp;&emsp;由于这里安装使用的本地系统账户，因此登录数据库使用的用户名和密码就是当前windows登录使用的用户名和密码。其他情况自行探索。安装完成之后，以管理员权限运行cmd，执行 db2cmd 打开db2控制台。</p>
<p><img src="https://yueryou.github.io/2019/06/DB2%E5%AE%89%E8%A3%85%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/images/db2_database_connection.jpg" alt="db2_database_connection"></p>
<p>开始创建数据库： </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">db2 create database test</span><br><span class="line"></span><br><span class="line">简单数据操作,客户端链接方式，DB2使用 DbVisualizer 10.0.20 工具进行连接，</span><br><span class="line"></span><br><span class="line">//删除数据库：</span><br><span class="line">db2 drop database test</span><br><span class="line"></span><br><span class="line">//停止所有的应用链接 </span><br><span class="line">db2 force applications all</span><br><span class="line"></span><br><span class="line">//控制台连接到db2数据库 </span><br><span class="line">db2 CONNECT TO test</span><br><span class="line"></span><br><span class="line">创建缓冲池：db2 CREATE BUFFERPOOL UAP_1_0_POOL  SIZE 5000 PAGESIZE 16384</span><br></pre></td></tr></table></figure>


      
    </div>
    
      <div class="full-width auto-padding tags">
        
          <a href="/tags/数据库/" rel="nofollow"><i class="fas fa-hashtag fa-fw"></i>数据库</a>
        
      </div>
    
  </section>
</article>

          </div>
        
      
        
          <div class='post-wrapper'>
            <article class="post reveal ">
  


  <section class='meta'>
    
    
    <div class="meta" id="header-meta">
      
        
  <h2 class="title">
    <a href="/2019/06/MAuth学习分析笔记/">
      MAuth学习分析笔记
    </a>
  </h2>


      
      <div class='new-meta-box'>
        
          
        
          
            
  <div class='new-meta-item author'>
    <a href="/" rel="nofollow">
      
        <i class="fas fa-user" aria-hidden="true"></i>
      
      <p>YUEX</p>
    </a>
  </div>


          
        
          
            <div class="new-meta-item date">
  <a class='notlink'>
    <i class="fas fa-calendar-alt" aria-hidden="true"></i>
    <p>2019-06-20</p>
  </a>
</div>

          
        
          
            

          
        
          
            

          
        
          
            

          
        
      </div>
      
        <hr>
      
    </div>
  </section>


  <section class="article typo">
    <div class="article-entry" itemprop="articleBody">
      <h2 id="MAuth简介"><a href="#MAuth简介" class="headerlink" title="MAuth简介"></a>MAuth简介</h2><p>&emsp;&emsp;MAuth移动统一认证平台系统，是一套完整的移动身份认证解决方案。包含管理后台MAuthManage、移动认证服务MAuthServer两个核心。外部依赖数据库，CA服务器，Netpass令牌服务器，单点登录服务，NetSeal签章服务。</p>
<p>&emsp;&emsp;管理后台系统软件结构图如下：</p>
<p><img src="https://yueryou.github.io/2019/06/MAuth%E5%AD%A6%E4%B9%A0%E5%88%86%E6%9E%90%E7%AC%94%E8%AE%B0/images/mauth_soft_logic.jpg" alt="系统软件结构图"></p>
<p>&emsp;&emsp;主要提供管理和统计报表服务，主要由系统管理员使用，管理用户、证书，令牌。审核用户、证书、令牌。报表统计和日志管理。</p>
<h2 id="系统结构"><a href="#系统结构" class="headerlink" title="系统结构"></a>系统结构</h2><p>&emsp;&emsp;系统架构描述了与其周边相关服务的关联关系，MAuth移动统一认证管理平台系统架构图如下：</p>
<p><img src="https://yueryou.github.io/2019/06/MAuth%E5%AD%A6%E4%B9%A0%E5%88%86%E6%9E%90%E7%AC%94%E8%AE%B0/images/mauth_sys_logic.jpg" alt="系统软件结构图"></p>
<p>&emsp;&emsp;目前学习的MAuthServer 为 V3.1.0.12版本。MAuth系统在实际应用场景中，位于客户业务系统之前，主要提供安全认证，证书管理，令牌管理，签名，签名验证服务。</p>
<h2 id="核心业务流程描述"><a href="#核心业务流程描述" class="headerlink" title="核心业务流程描述"></a>核心业务流程描述</h2><h3 id="证书服务"><a href="#证书服务" class="headerlink" title="证书服务"></a>证书服务</h3><ul>
<li><p>证书申请下载</p>
<p>&emsp;&emsp;为移动设备提供下载移动证书服务</p>
<p>业务处理流程如下图：</p>
<p><img src="https://yueryou.github.io/2019/06/MAuth%E5%AD%A6%E4%B9%A0%E5%88%86%E6%9E%90%E7%AC%94%E8%AE%B0/images/mauth_request_cert.jpg" alt="系统软件结构图"></p>
<p>&emsp;&emsp;证书申请下载请求由客户端发起，经过一系列的校验，通过之后，开始于CA进行交互。</p>
<p>正常流程，需要与CA交互三次。</p>
<p>第一步，根据用户名获取UUID，CertManger.applyUser()</p>
<p>第二步，获取REFNO和AUTHCODE两码，CertManager.requestCert()</p>
<p>第三步，下载证书，CertManager.downCert()</p>
</li>
</ul>
<p>  异常流程还需要，对原始证书进行作废。CertManager.revokeCert()</p>
<p>  因此需要与CA交互四次。</p>
<ul>
<li><p>p10： </p>
<p>&emsp;&emsp;p10证书一般是一个base64文件，实际上他不是一张真正的证书应该是一段可以向CA申请证书的P10请求，该请求一般是通过硬件生成密钥对后，将私钥单独存放，<u>但是将公钥放入p10中</u>，CA受到该p10请求后，可以校验，并根据p10中的信息制作一张没有私钥的公钥证书，p10 即公钥数据。</p>
</li>
<li><p>证书内容</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">Certificate:</span><br><span class="line">    Data:</span><br><span class="line">        Version: 3 (0x2)</span><br><span class="line">        Serial Number: 14270177914825791894 (0xc609db34f6d0d996)</span><br><span class="line">    Signature Algorithm: sha1WithRSAEncryption</span><br><span class="line">        Issuer: C=CN, ST=WH, L=WH, O=yueryou, OU=yueryou, CN=*.yueryou.science</span><br><span class="line">        Validity</span><br><span class="line">            Not Before: Jun 20 08:55:36 2019 GMT</span><br><span class="line">            Not After : Jun 17 08:55:36 2029 GMT</span><br><span class="line">        Subject: C=CN, ST=WH, L=WH, O=yueryou, OU=yueryou, CN=*.yueryou.science</span><br><span class="line">        Subject Public Key Info:</span><br><span class="line">            Public Key Algorithm: rsaEncryption</span><br><span class="line">                Public-Key: (1024 bit)</span><br><span class="line">                Modulus:</span><br><span class="line">                    00:f0:9f:9a:3e:bf:9a:93:d4:b9:1a:84:7e:27:ac:</span><br><span class="line">                    73:85:5f:a4:c1:cd:7f:bb:e8:64:eb:09:6e:36:db:</span><br><span class="line">                    c1:68:6a:45:cc:c4:06:ff:f6:cd:b4:8b:6c:d6:6d:</span><br><span class="line">                    b7:6a:b0:1b:fa:95:71:82:0f:2d:24:90:7f:25:ad:</span><br><span class="line">                    2d:84:f5:e0:f7:b1:4e:9c:de:60:54:b9:a8:71:41:</span><br><span class="line">                    2e:7f:56:47:66:f5:99:55:30:52:db:bb:50:f0:a1:</span><br><span class="line">                    1f:be:f3:d1:95:cb:dd:cf:d7:1a:44:18:ca:f2:26:</span><br><span class="line">                    3c:59:8e:b5:f4:56:57:3d:27:c8:b2:23:c2:41:28:</span><br><span class="line">                    8f:63:ef:9b:d8:30:bd:5c:73</span><br><span class="line">                Exponent: 65537 (0x10001)</span><br><span class="line">        X509v3 extensions:</span><br><span class="line">            X509v3 Basic Constraints:</span><br><span class="line">                CA:FALSE</span><br><span class="line">            X509v3 Key Usage:</span><br><span class="line">                Digital Signature, Non Repudiation, Key Encipherment</span><br><span class="line">    Signature Algorithm: sha1WithRSAEncryption</span><br><span class="line">         c8:e2:b9:36:32:f9:a4:a1:94:d7:79:75:a2:64:19:f6:79:71:</span><br><span class="line">         24:4e:c7:b5:ce:b8:8e:5e:ea:e3:6f:93:64:eb:aa:a5:d7:78:</span><br><span class="line">         eb:e0:77:f2:c3:9c:5a:0b:21:06:a8:f0:12:5d:e7:92:31:28:</span><br><span class="line">         10:ad:12:a7:44:6a:1c:76:11:b5:ca:79:09:d0:c4:bf:b1:d8:</span><br><span class="line">         4a:8b:51:27:56:44:90:92:67:6d:0b:5a:eb:5a:b0:51:97:40:</span><br><span class="line">         01:f7:9b:7b:35:95:a4:34:08:9d:68:f5:4e:b5:3e:0e:67:d6:</span><br><span class="line">         08:4d:3b:97:43:bd:96:47:0f:33:2c:27:c1:53:07:5e:9d:82:</span><br><span class="line">         c9:18</span><br></pre></td></tr></table></figure>

<p>&emsp;&emsp;证书主要内容有：1.证书拥有者，2.证书发布者，3.证书序列号，4.证书有效期开始结束日期，5.证书签名，6.签名算法，7.证书版本，9公钥，8.其他扩展信息</p>
<ul>
<li>CA证书的重要属性（DN、SN、参考号、授权号、有效日期、证书状态、颁发者）</li>
</ul>
<ol>
<li>DN： 用户唯一标识（Distinct Name,DN串内容：C标识国家代码，ST标识省份，L标识城市，O标识组织代码，OU组织类型企业或个人，CN标识域名）</li>
<li>SN： 证书序列号证书序列号是证书的唯一标识。和DN的区别是，当发生换证、补发情况时，DN是相同的，而SN是不同的。</li>
<li>参考号和授权码，这两个字段用在证书下载过程中。</li>
<li>证书状态有：未下载、激活、冻结和注销。</li>
<li>颁发者，是证书的签发证书DN，在证书验证过程中需要验证该属性</li>
</ol>
</li>
</ul>
<ul>
<li><p>证书冻结解冻</p>
<p>&emsp;&emsp;证书冻结和证书作废基本差不多，唯一的区别是，证书作废之后，证书就被吊销了，只能重新申请新的证书，原来的证书无法使用。而证书冻结后，可以进行解冻，解冻后的证书依然有效且可以正常使用。</p>
<p><img src="https://yueryou.github.io/2019/06/MAuth%E5%AD%A6%E4%B9%A0%E5%88%86%E6%9E%90%E7%AC%94%E8%AE%B0/images/mauth_lock_and_unlock.jpg" alt="证书冻结解冻流程图"></p>
<p>  证书冻结和解冻都需要和CA进行一次交互即可。</p>
</li>
<li><p>证书作废</p>
<p>&emsp;&emsp;证书因为以下某种原因需要作废处理的：</p>
<ol>
<li>证书持有者改变，无权使用</li>
<li>证书持有者的密钥已遭到破环或者证书介质丢失，或者怀疑密钥泄露，为避免遭受损失</li>
<li>证书持有者本人不想使用该证书</li>
<li>证书签发者CA的密钥已被破坏或到期失效</li>
<li>证书签发CA决定作废证书</li>
</ol>
<p>CA会通过CRL定期发布出去</p>
<p><img src="https://yueryou.github.io/2019/06/MAuth%E5%AD%A6%E4%B9%A0%E5%88%86%E6%9E%90%E7%AC%94%E8%AE%B0/images/mauth_cancel_cert.jpg" alt="证书作废流程图"></p>
</li>
</ul>
<h3 id="二维码扫码登录"><a href="#二维码扫码登录" class="headerlink" title="二维码扫码登录"></a>二维码扫码登录</h3><p>  扫码登录流程</p>
<p>  <img src="https://yueryou.github.io/2019/06/MAuth%E5%AD%A6%E4%B9%A0%E5%88%86%E6%9E%90%E7%AC%94%E8%AE%B0/images/mauth_qrcode_login_flow.jpg" alt="二维码登录流程图"></p>
<p>  跨角色泳道图</p>
<p>  <img src="https://yueryou.github.io/2019/06/MAuth%E5%AD%A6%E4%B9%A0%E5%88%86%E6%9E%90%E7%AC%94%E8%AE%B0/images/mauth_qrcode_login_logic.jpg" alt="二维码登录泳道图"></p>
<p>  二维码登录流程说明：</p>
<p>  MAuth系统位于客户业务系统之前，客户端系统为验证用户身份，</p>
<p>  第一步、请求获取验证身份的二维码，</p>
<p>  第二步、用户通过手机扫描二维码，确认登录时会发送原始数据加签名信息到MAuthServer，进行签名验证。</p>
<p>  第三步、客户服务异步请求查询用户登录状态，若登录成功则用户身份确认通过。</p>
<h3 id="PDF签章"><a href="#PDF签章" class="headerlink" title="PDF签章"></a>PDF签章</h3><ol>
<li><p>签章注册</p>
<p>&emsp;&emsp;用户申请注册签章信息，需要提供用户信息，组织信息，印章图片，图片签名，印模名称（个人或企业）。</p>
<p>签章注册流程图如下所示：</p>
<p><img src="https://yueryou.github.io/2019/06/MAuth%E5%AD%A6%E4%B9%A0%E5%88%86%E6%9E%90%E7%AC%94%E8%AE%B0/images/mauth_seal_register.jpg" alt="二维码登录泳道图"></p>
<p>签章服务由 NetSeal提供，itextPdfServer.jar,通过Java -jar itextPdfServer.jar 命令方式启动。<br>获取签章信息，NetSealClient.getSeal();即根据传递的参数获取用户签章信息。</p>
</li>
<li><p>获取二维码</p>
<p>&emsp;&emsp;上传PDF文件，获取二维码信息，二维码数据包含 businesscode，random（PDF的UUID），optType </p>
<p><img src="https://yueryou.github.io/2019/06/MAuth%E5%AD%A6%E4%B9%A0%E5%88%86%E6%9E%90%E7%AC%94%E8%AE%B0/images/mauth_get_pdf_qrcode.jpg" alt="二维码登录泳道图"></p>
</li>
</ol>
<ul>
<li><p>PDF签章——获取待签章的pdf摘要</p>
<p>&emsp;&emsp;GetPdfData接口，获取待签章的pdf摘要，调用 CertManager.getCertState()，获取用户证书状态。通过http接口调用签章服务，获取摘要。</p>
<p><img src="https://yueryou.github.io/2019/06/MAuth%E5%AD%A6%E4%B9%A0%E5%88%86%E6%9E%90%E7%AC%94%E8%AE%B0/images/mauth_pdf_file_seal.jpg" alt="获取待签章的PDF文件"></p>
<p>&emsp;&emsp;获取签章后的PDF，getPdfUrl接口，获取签章后的PDF数据，内部会调用<code>/pdf/signature/merge</code>，签章服务接口，对PDF进行签章处理，然后更新缓存中的PdfParam对象信息。然后通过 <code>/sign/result/get</code> 获取签章结果。<code>/sign/pdf/signed/download</code> 下载已签章文件。</p>
</li>
</ul>
<h3 id="用户注册流程"><a href="#用户注册流程" class="headerlink" title="用户注册流程"></a>用户注册流程</h3><p>  &emsp;&emsp;管理员通过后台用户管理功能新增用户，然后进入审核，用户审核模块，对刚刚新增的用户，设置为审核通过。然后就可以使用该用户的用户和注册码进行登录了，令牌用户只能使用令牌类型的账号登录，证书用户需要使用单独的SDK app进行登陆</p>
<h3 id="令牌种子"><a href="#令牌种子" class="headerlink" title="令牌种子"></a>令牌种子</h3><ul>
<li><p>获取令牌种子</p>
<ol>
<li>接受请求 <code>username,imei,sm2pubkey</code> </li>
<li>获取用户信息，判断用户令牌状态，令牌审核状态，令牌有效状态（是否绑定，已绑定的令牌，请求获取令牌种子，需要先解绑原来的令牌种子）</li>
<li>注销令牌（删除card_info表中的令牌数据，ManagementAPI.logOut）</li>
<li>产生一个32位的安全随机数（申请下载种子）</li>
<li>种子与用户进行绑定(ManagementAPI.bind)</li>
<li>用公钥加密种子</li>
<li>更新用户令牌数据</li>
<li>返回加密后的种子数据，结束</li>
</ol>
</li>
<li><p>更新令牌种子</p>
<p>&emsp;&emsp;更新令牌种子实质是先注销原来旧的令牌种子，然后重新生成新的令牌种子进行绑定。与获取令牌的中的流程基本相同。</p>
</li>
<li><p>冻结种子</p>
<ol>
<li>由后台发起，冻结某个用户的种子。username,squenceTime,imei</li>
<li>经过一系列的参数校验</li>
<li>最终调用 ManagementAPI.lockCard，冻结种子</li>
<li>结束，冻结后的种子在解冻之前都无法使用。</li>
</ol>
</li>
<li><p>解冻种子</p>
<ol>
<li>由后台发起，冻结某个用户的种子。username,squenceTime,imei</li>
<li>经过一系列的参数校验</li>
<li>最终调用 ManagementAPI.unlockCard，解冻种子</li>
<li>结束，种子解冻之后，有效可是继续使用。</li>
</ol>
</li>
<li><p>验证令牌</p>
<ol>
<li>接收请求 <code>username,imei,password</code></li>
<li>获取用户详细信息，<code>username,imei,token</code></li>
<li>判断用户令牌种子审核状态，令牌当前是否有效（仅审核通过且有效的状态的令牌才能进行验证。1=激活，2=正常，3=作废，4=未知，）</li>
<li>验证，第一步验证用户卡信息，种子状态，种子使用次数（是否达到最大使用次数限制），校验失败错误次数（是否达到最大错误次数），</li>
<li>验证令牌，验证密码（事件因子，时间因子，imei，用户密码，挑战码，种子，通过一个计算公式，利用上述因子参与计算，得到令牌，若计算的令牌相同则验证通过。）</li>
<li>记录验证结果入库</li>
<li>验证结束返回验证结果</li>
</ol>
</li>
</ul>

      
    </div>
    
      <div class="full-width auto-padding tags">
        
          <a href="/tags/项目分析MAuth/" rel="nofollow"><i class="fas fa-hashtag fa-fw"></i>项目分析MAuth</a>
        
      </div>
    
  </section>
</article>

          </div>
        
      
    
  </section>
  
    
    <!-- 根据主题中的设置决定是否在archive中针对摘要部分的MathJax公式加载mathjax.js文件 -->
    
    

  


	
</div>
<aside class='l_side'>
  
    
    
      
        
          
          
            <section class='widget author'>
  <div class='content pure'>
    
      <div class='avatar'>
        <img class='avatar' src='https://cdn.jsdelivr.net/gh/xaoxuu/assets@master/avatar/avatar.png'/>
      </div>
    
    
    
      <div class="social-wrapper">
        
          
            <a href="/atom.xml"
              class="social fas fa-rss flat-btn"
              target="_blank"
              rel="external nofollow noopener noreferrer">
            </a>
          
        
          
            <a href="mailto:me@xaoxuu.com"
              class="social fas fa-envelope flat-btn"
              target="_blank"
              rel="external nofollow noopener noreferrer">
            </a>
          
        
          
            <a href="https://github.com/xaoxuu"
              class="social fab fa-github flat-btn"
              target="_blank"
              rel="external nofollow noopener noreferrer">
            </a>
          
        
          
            <a href="https://music.163.com/#/user/home?id=63035382"
              class="social fas fa-headphones-alt flat-btn"
              target="_blank"
              rel="external nofollow noopener noreferrer">
            </a>
          
        
      </div>
    
  </div>
</section>

          
        
      
        
          
          
            

          
        
      
        
          
          
            <section class='widget grid'>
  
<header class='pure'>
  <div><i class="fas fa-map-signs fa-fw" aria-hidden="true"></i>&nbsp;&nbsp;站内导航</div>
  
</header>

  <div class='content pure'>
    <ul class="grid navgation">
      
        <li><a class="flat-box" title="/" href="/"
          
          
          id="home">
          
            <i class="fas fa-clock fa-fw" aria-hidden="true"></i>
          
          近期文章
        </a></li>
      
        <li><a class="flat-box" title="/blog/archives/" href="/blog/archives/"
          
            rel="nofollow"
          
          
          id="blogarchives">
          
            <i class="fas fa-archive fa-fw" aria-hidden="true"></i>
          
          文章归档
        </a></li>
      
        <li><a class="flat-box" title="/projects/" href="/projects/"
          
          
          id="projects">
          
            <i class="fas fa-code-branch fa-fw" aria-hidden="true"></i>
          
          开源项目
        </a></li>
      
        <li><a class="flat-box" title="/friends/" href="/friends/"
          
            rel="nofollow"
          
          
          id="friends">
          
            <i class="fas fa-link fa-fw" aria-hidden="true"></i>
          
          我的友链
        </a></li>
      
        <li><a class="flat-box" title="https://xaoxuu.com/wiki/material-x/" href="https://xaoxuu.com/wiki/material-x/"
          
            rel="nofollow"
          
          
          id="https:xaoxuu.comwikimaterial-x">
          
            <i class="fas fa-book fa-fw" aria-hidden="true"></i>
          
          主题文档
        </a></li>
      
        <li><a class="flat-box" title="/about/" href="/about/"
          
            rel="nofollow"
          
          
          id="about">
          
            <i class="fas fa-info-circle fa-fw" aria-hidden="true"></i>
          
          关于小站
        </a></li>
      
    </ul>
  </div>
</section>

          
        
      
        
          
          
            

          
        
      
        
          
          
            
  <section class='widget tagcloud'>
    
<header class='pure'>
  <div><i class="fas fa-fire fa-fw" aria-hidden="true"></i>&nbsp;&nbsp;热门标签</div>
  
    <a class="rightBtn"
    
      rel="nofollow"
    
    
    href="/blog/tags/"
    title="blog/tags/">
    <i class="fas fa-expand-arrows-alt fa-fw"></i></a>
  
</header>

    <div class='content pure'>
      <a href="/tags/数据库/" style="font-size: 14px; color: #999">数据库</a> <a href="/tags/项目分析MAuth/" style="font-size: 14px; color: #999">项目分析MAuth</a>
    </div>
  </section>


          
        
      
        
          
          
            


  <section class='widget music'>
    
<header class='pure'>
  <div><i class="fas fa-compact-disc fa-fw" aria-hidden="true"></i>&nbsp;&nbsp;最近在听</div>
  
    <a class="rightBtn"
    
      rel="external nofollow noopener noreferrer"
    
    
      target="_blank"
    
    href="https://music.163.com/#/user/home?id=63035382"
    title="https://music.163.com/#/user/home?id=63035382">
    <i class="far fa-heart fa-fw"></i></a>
  
</header>

    <div class='content pure'>
      
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.7.0/dist/APlayer.min.css">
  <div class="aplayer"
    data-theme="#1BCDFC"
    
    
    data-mode="circulation"
    data-server="netease"
    data-type="playlist"
    data-id="2615636388"
    data-volume="0.7">
  </div>
  <script src="https://cdn.jsdelivr.net/npm/aplayer@1.7.0/dist/APlayer.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/meting@1.1.0/dist/Meting.min.js"></script>


    </div>
  </section>


          
        
      
    

  
</aside>

<footer id="footer" class="clearfix">
  
    <div class="footer">
      <p>鱼儿戏水，快乐学习</p>

    </div>
    <br>
  
  
    <div class="social-wrapper">
      
        
          <a href="/atom.xml"
            class="social fas fa-rss flat-btn"
            target="_blank"
            rel="external nofollow noopener noreferrer">
          </a>
        
      
        
          <a href="mailto:me@xaoxuu.com"
            class="social fas fa-envelope flat-btn"
            target="_blank"
            rel="external nofollow noopener noreferrer">
          </a>
        
      
        
          <a href="https://github.com/xaoxuu"
            class="social fab fa-github flat-btn"
            target="_blank"
            rel="external nofollow noopener noreferrer">
          </a>
        
      
        
          <a href="https://music.163.com/#/user/home?id=63035382"
            class="social fas fa-headphones-alt flat-btn"
            target="_blank"
            rel="external nofollow noopener noreferrer">
          </a>
        
      
    </div>
  
  <br>
  <div><p>博客内容遵循 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">署名-非商业性使用-相同方式共享 4.0 国际 (CC BY-NC-SA 4.0) 协议</a></p>
</div>
  <div>
    本站使用
    <a href="https://xaoxuu.com/wiki/material-x/" target="_blank" class="codename">YUEX</a>
    作为主题
    
      ，
      总访问量为
      <span id="busuanzi_value_site_pv"><i class="fas fa-spinner fa-spin fa-fw" aria-hidden="true"></i></span>
      次
    
    。
  </div>
</footer>
<script>setLoadingBarProgress(80);</script>




	<!-- 根据主题中的设置决定是否在archive中针对摘要部分的MathJax公式加载mathjax.js文件 -->
	

	


      <script>setLoadingBarProgress(60);</script>
    </div>
    <a class="s-top fas fa-arrow-up fa-fw" href='javascript:void(0)'></a>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>

  <script>
    var GOOGLE_CUSTOM_SEARCH_API_KEY = "";
    var GOOGLE_CUSTOM_SEARCH_ENGINE_ID = "";
    var ALGOLIA_API_KEY = "";
    var ALGOLIA_APP_ID = "";
    var ALGOLIA_INDEX_NAME = "";
    var AZURE_SERVICE_NAME = "";
    var AZURE_INDEX_NAME = "";
    var AZURE_QUERY_KEY = "";
    var BAIDU_API_ID = "";
    var SEARCH_SERVICE = "hexo" || "hexo";
    var ROOT = "/"||"/";
    if(!ROOT.endsWith('/'))ROOT += '/';
  </script>

<script src="//instant.page/1.2.2" type="module" integrity="sha384-2xV8M5griQmzyiY3CDqh1dn4z3llDVqZDqzjzcY+jCBCk/a5fXJmuZ/40JJAPeoU"></script>


  <script async src="https://cdn.jsdelivr.net/npm/scrollreveal@4.0.5/dist/scrollreveal.min.js"></script>
  <script type="text/javascript">
    $(function() {
      const $reveal = $('.reveal');
      if ($reveal.length === 0) return;
      const sr = ScrollReveal({ distance: 0 });
      sr.reveal('.reveal');
    });
  </script>


  <script src="https://cdn.jsdelivr.net/npm/node-waves@0.7.6/dist/waves.min.js"></script>
  <script type="text/javascript">
    $(function() {
      Waves.attach('.flat-btn', ['waves-button']);
      Waves.attach('.float-btn', ['waves-button', 'waves-float']);
      Waves.attach('.float-btn-light', ['waves-button', 'waves-float', 'waves-light']);
      Waves.attach('.flat-box', ['waves-block']);
      Waves.attach('.float-box', ['waves-block', 'waves-float']);
      Waves.attach('.waves-image');
      Waves.init();
    });
  </script>


  <script async src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-busuanzi@2.3/js/busuanzi.pure.mini.js"></script>




  
  
  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-backstretch/2.0.4/jquery.backstretch.min.js"></script>
    <script type="text/javascript">
      $(function(){
        if ('.cover') {
          $('.cover').backstretch(
          ["https://img.vim-cn.com/6d/a0c9e6f9efad8b731cb7376504bd10d79d2053.jpg"],
          {
            duration: "6000",
            fade: "2500"
          });
        } else {
          $.backstretch(
          ["https://img.vim-cn.com/6d/a0c9e6f9efad8b731cb7376504bd10d79d2053.jpg"],
          {
            duration: "6000",
            fade: "2500"
          });
        }
      });
    </script>
  











  <script src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-material-x@19.5/js/app.js"></script>


  <script src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-material-x@19.5/js/search.js"></script>




<!-- 复制 -->
<script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script>
  let COPY_SUCCESS = "复制成功";
  let COPY_FAILURE = "复制失败";
  /*页面载入完成后，创建复制按钮*/
  !function (e, t, a) {
    /* code */
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '  <i class="fa fa-copy"></i><span>复制</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });

      clipboard.on('success', function(e) {
        //您可以加入成功提示
        console.info('Action:', e.action);
        console.info('Text:', e.text);
        console.info('Trigger:', e.trigger);
        success_prompt(COPY_SUCCESS);
        e.clearSelection();
      });
      clipboard.on('error', function(e) {
        //您可以加入失败提示
        console.error('Action:', e.action);
        console.error('Trigger:', e.trigger);
        fail_prompt(COPY_FAILURE);
      });
    }
    initCopyCode();

  }(window, document);

  /**
   * 弹出式提示框，默认1.5秒自动消失
   * @param message 提示信息
   * @param style 提示样式，有alert-success、alert-danger、alert-warning、alert-info
   * @param time 消失时间
   */
  var prompt = function (message, style, time)
  {
      style = (style === undefined) ? 'alert-success' : style;
      time = (time === undefined) ? 1500 : time*1000;
      $('<div>')
          .appendTo('body')
          .addClass('alert ' + style)
          .html(message)
          .show()
          .delay(time)
          .fadeOut();
  };

  // 成功提示
  var success_prompt = function(message, time)
  {
      prompt(message, 'alert-success', time);
  };

  // 失败提示
  var fail_prompt = function(message, time)
  {
      prompt(message, 'alert-danger', time);
  };

  // 提醒
  var warning_prompt = function(message, time)
  {
      prompt(message, 'alert-warning', time);
  };

  // 信息提示
  var info_prompt = function(message, time)
  {
      prompt(message, 'alert-info', time);
  };

</script>


<!-- fancybox -->
<script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>
<script>
  let LAZY_LOAD_IMAGE = "";
  $(".article-entry").find("fancybox").find("img").each(function () {
      var element = document.createElement("a");
      $(element).attr("data-fancybox", "gallery");
      $(element).attr("href", $(this).attr("src"));
      /* 图片采用懒加载处理时,
       * 一般图片标签内会有个属性名来存放图片的真实地址，比如 data-original,
       * 那么此处将原本的属性名src替换为对应属性名data-original,
       * 修改如下
       */
       if (LAZY_LOAD_IMAGE) {
         $(element).attr("href", $(this).attr("data-original"));
       }
      $(this).wrap(element);
  });
</script>





  <script>setLoadingBarProgress(100);</script>
</body>
</html>
